h1. oui_player (formerly oui_video)

h2. Introduction

An extendable plugin to easily embed customized audio and video players.

p(alert-block information). %(ui-icon ui-icon-info).% This plugin does not use oembed, it builds iframe embedding codes and HTML5 players by its own without any external request for better performances.

h3. Supported providers as extensions

* "Abc News":http://abcnews.go.com/video: "oui_player_abcnews":https://github.com/oui-textpattern/oui_player_abcnews;
* "Archive":https://archive.org/: "oui_player_archive":https://github.com/oui-textpattern/oui_player_archive;
* "Bandcamp":https://bandcamp.com/: "oui_player_bandcamp":https://github.com/oui-textpattern/oui_player_bandcamp;
* "Dailymotion":http://www.dailymotion.com/: "oui_player_dailymotion":https://github.com/oui-textpattern/oui_player_dailymotion;
* "Mixcloud":https://www.mixcloud.com/: "oui_player_mixcloud":https://github.com/oui-textpattern/oui_player_mixcloud;
* "Myspace videos":https://myspace.com/myspace/videos: "oui_player_myspace":https://github.com/oui-textpattern/oui_player_myspace;
* "Soundcloud":https://soundcloud.com/: "oui_player_soundcloud":https://github.com/oui-textpattern/oui_player_soundcloud;
* "Twitch":https://www.twitch.tv/: "oui_player_twitch":https://github.com/oui-textpattern/oui_player_twitch;
* "Viddsee":https://www.viddsee.com/: "oui_player_viddsee":https://github.com/oui-textpattern/oui_player_viddsee;
* "Vimeo":http://www.vimeo.com/: "oui_player_vimeo":https://github.com/oui-textpattern/oui_player_vimeo;
* "Vine":http://vine.co/: "oui_player_vine":https://github.com/oui-textpattern/oui_player_vine;
* "Youtube":https://www.youtube.com/: "oui_player_youtube":https://github.com/oui-textpattern/oui_player_youtube.

h3. Plugin requirements

oui_player's minimum requirements:

* "Textpattern CMS":http://textpattern.com/ 4.6+.

h2. Plugin management

h3. Installation

h4. From the admin interface

Follow the below instructions before or after installing the wanted oui_player extensions:

# "Download":https://github.com/NicolasGraph/oui_player/releases the compiled plugin file or the source to compile a customized file.
# Paste the content of the compiled plugin file under the "Admin > Plugins":?event=plugin tab and click the _Upload_ button.
# Confirm the plugin install by clicking the _Install_ button on the plugin preview page.
# Enable the plugin.

Once the plugin and its extensions enabled, you will need to complete the setup by clicking _Options_ or visiting your "Admin > Preferences":?event=prefs#prefs_group_oui_player tab.
This last step need to be repeated each time you add or remove one or more oui_player extensions to update the plugin preferences.

h4. Via Composer

After "installing Composer":https://getcomposer.org/doc/00-intro.md…

# Target your project directory:
@$ cd /path/to/your/textpattern/installation/dir@
# If it's not already done, lock your version of Txp:
@$ composer require textpattern/lock:4.6.2@, where @4.6.2@ is the Txp version in use.
# Install oui_player:
@$ composer require oui/oui_player@
# Connect to the Txp admin interface and click _Options_ or visit your "Admin > Preferences":?event=prefs#prefs_group_oui_player tab to fill the plugin prefs.

h3. Update

h4. From the admin interface

Follow the install instructions.
If you are updating from v1.*, be sure to install all wanted extensions before to visit the "Admin > Preferences":?event=prefs#prefs_group_oui_player tab to keep your preference values untouched.

h4. Via Composer

bc. $ composer update oui/oui_player

h3. Uninstall

h4. From the admin interface

# Check the box on the left of the plugin row under the "Admin > Plugins":?event=plugin.
# open the select list at the bottom of the plugins table and choose _Delete_.
# confirm the plugin deletion.

h4. Via Composer

bc. $ composer remove oui/oui_player

h2. Preferences/options

Plugin prefs can be set under the "Admin > Preferences":?event=prefs#prefs_group_oui_player tab and are mainly used as default values for the @<txp:oui_player />@ tag attributes.

h3. Global prefs

- @Field used by default@ :=
Defines a field to use as the default @play@ attribute value.
%(warning)The provided fieldname must be different than any value entered in it; avoid digits if you use ID's as @play@ attribute values%
*Default:* @article_image@
*valid:* @article_image@, @excerpt@ or any existing custom field =:
- @Favourite provider@ :=
Set the default @provider@ attribute value.
*Default:* the first plugged provider
*valid:* Any plugged provider in the select list =:
- @Render responsive player@ :=
*Default:* no
*valid:* yes or no =:
- @Display the provider player preferences@ :=
Displays the defined provider prefs as a goup of prefs.
*Default:* yes
*valid:* yes or no =:

h3. Providers prefs

While %(information)some player parameters, related to the item to play, should be used through attributes% (e.g. the Youtube @start@ parameter which defines the second where to start playing the video), %(information)these used as global settings should preferrably be set through the plugin preferences% to %(warning)avoid a massive use of tag attributes%.

Of course, it is still possible to override a plugin pref value via an attribute when needed.

h2. Tags

h3. oui_player

Embeds a player.

bc(language-markup). <txp:oui_player />

h4. Presentational attributes

- @label@ :=
Label for the video.
*default:* none
*valid:* string =:
- @labeltag@ :=
HTML wraptag for the label, without brackets.
*default:* none
*valid:* HTML container tag =:
- @wraptag@ :=
HTML tag to be used as the content wraptag, without brackets.
*default:* none
*valid:* HTML container tag =:
- @class@ :=
CSS class for HTML content wraptag.
*default:* none
*valid:* string =:
- @responsive@ :=
*Default:* none
*valid:* @true@ or @false@ =:

h4. Main tag attributes

Most of the following attributes can be set via the _Preferences_ tab; +always prefer plugin "global" prefs to tag related attributes!+

- @play@ :=
The item to play; *required if* it does not use the value of the custom field selected in the plugin prefs (See each provider to know the valid values).
*default:* %(information)changed v1.2.0% the @play@ attribute value of an eventual @<txp:oui_if_play></txp:oui_if_play>@ container tag, or the custom field value of the one selected in the plugin prefs.
*valid:* URL, id or custom field name =:
- @provider@ :=
The provider to use; *required if* the @play@ attribute is an id, *recommended anyways* if known as it increases the plugin performances by skipping the provider guess.
*default:* plugin pref
*valid:* a defined provider

h4. Providers related tag attributes

See the related link in the table of contents.

h3. oui_if_player

Checks the @play@ attribute value againsts defined URL schemes.

bc(language-markup). <txp:oui_if_player>
[…]
</txp:oui_if_player>

h4. Attributes

- @play@ :=
The item to play; *required if* it does not use the value of the custom field selected in the plugin prefs (See each provider to know the valid values).
*Default:* The custom field value of the one selected in the plugin prefs. =:
- @provider@ :=
Check the URL against valid URL schemes of the provided provider.
*Default:* none =:

h2. Examples

h3. Display a player from the default values collected via plugin prefs

bc(language-markup). <txp:oui_player />

h3. Display a player from a manually filled URL

bc(language-markup). <txp:oui_player play="https://vimeo.com/155020267" />

…or, maybe a bit faster…

bc(language-markup). <txp:oui_player provider="vimeo" play="https://vimeo.com/155020267" />

h3. Display a player from manually filled ID

Using the favourite provider set in the prefs.

bc(language-markup). <txp:oui_player play="x4l8awd" />

…or, in conjonction with the @provider@ attribute…

bc(language-markup). <txp:oui_player provider="dailymotion" play="x4l8awd" />

h3. Display a player only if its URL is recognized as a provider URL scheme

With the default values collected via plugin prefs…

bc(language-markup).. <txp:oui_if_player>
    <txp:oui_player />
</txp:oui_if_player>

p. …or, with a manually filled URL…

bc(language-markup).. <txp:oui_if_player play="https://vimeo.com/155020267">
    <txp:oui_player />
</txp:oui_if_player>

p. You can also add the provider attribute to check the URL against URL schemes of a defined provider.

h2. Credits

h3. Author

"Nicolas Morand":https://twitter.com/NicolasGraph
_Thank you to the Textpattern community and the core team._

h3. License

This plugin is distributed under "GPL v2.0":https://www.gnu.org/licenses/gpl-2.0.txt.

oui_player version 2, Copyright (C) 2018 Nicolas Morand
This Textpattern plugin comes with ABSOLUTELY "NO WARRANTY":https://www.gnu.org/licenses/gpl-2.0.html#section11.
This is free software, and you are welcome to redistribute it "under certain conditions":https://www.gnu.org/licenses/gpl-2.0.html#SEC3.

h3. Changelog

* *v2.0.0-beta* (2017-06-24)
** changed: providers now work as pluggable extensions:
*** Provider base (required): "oui_player_provider":https://github.com/oui-textpattern/;
*** ABC News: "oui_player_abcnews":https://github.com/oui-textpattern/oui_player_abcnews;
*** Archive: "oui_player_archive":https://github.com/oui-textpattern/oui_player_archive;
*** Bandcamp: "oui_player_bandcamp":https://github.com/oui-textpattern/oui_player_bandcamp;
*** Dailymotion: "oui_player_bandcamp":https://github.com/oui-textpattern/oui_player_dailymotion;
*** Giphy: "oui_player_giphy":https://github.com/oui-textpattern/oui_player_giphy (new);
*** Mixcloud: "oui_player_mixcloud":https://github.com/oui-textpattern/oui_player_mixcloud;
*** MySpace: "oui_player_myspace":https://github.com/oui-textpattern/oui_player_myspace;
*** HTML: "oui_player_html":https://github.com/oui-textpattern/oui_player_html;
*** Soundcloud: "oui_player_soundcloud":https://github.com/oui-textpattern/oui_player_soundcloud;
*** Twitch: "oui_player_twitch":https://github.com/oui-textpattern/oui_player_twitch;
*** Viddsee: "oui_player_viddsee":https://github.com/oui-textpattern/oui_player_viddsee;
*** Vimeo: "oui_player_vimeo":https://github.com/oui-textpattern/oui_player_vimeo;
*** Vine: "oui_player_vine":https://github.com/oui-textpattern/oui_player_vine;
*** Youtube: "oui_player_youtube":https://github.com/oui-textpattern/oui_player_youtube;
** changed: providers related preferences displayed by default.
* *v1.3.1* (2017-07-13)
* *v1.3.0* (2017-05-24)
** Adds "Composer":https://getcomposer.org/ support for "textpattern/installer":https://packagist.org/packages/textpattern/installer;
** fixes multiple players prefs display and improves perfs;
** improves scripts embedding;
** added: Youtube player parameters @enablejsapi@ and @origin@;
** added: Dailymotion player parameters @api@ and @origin@;
** added: Vimeo player parameter @api@ and removes @badge@;
** added: support for:
*** "Bandcamp":https://bandcamp.com/;
*** HTML5 "audio":https://developer.mozilla.org/fr/docs/Web/HTML/Element/Audio + "video":https://developer.mozilla.org/fr/docs/Web/HTML/Element/Video;
* *v1.2.1* (2017-01-16)
** Fixed: Fixes the _Field used by default_ pref display when no custom field exists;
** fixed: fixes Textpack typo;
** changed: compiled code lightened by removing duplicated license related comments;
* *v1.2.0* (2016-12-12)
** added: sets the custom field plugin pref as the defaut value of the conditional tag @play@ attribute;
** added: introduces a @play@ attribute value inheritance in a conditional/container tag context;
** added: support for:
*** "Twitch channels":https://www.twitch.tv/,
*** "Vine":https://vine.co/;
** changed: improves PHP classes and methods use (see _For developers_).
* *oui_player v1.1.0* (2016-10-14)
** changed: plugin/tag names;
** removed: Txp 4.5 support;
** changed: consistency between attribute and player parameter names increased;
** changed: code rework to be easily extendable;
** added: support for:
*** "Abc News":http://abcnews.go.com/video,
*** "Archive":https://archive.org/,
*** "Mixcloud":https://www.mixcloud.com/,
*** "Myspace videos":https://myspace.com/myspace/videos,
*** "Soundcloud":https://soundcloud.com/,
*** "Twitch":https://www.twitch.tv/,
*** "Viddsee":https://www.viddsee.com/;
** (changed) Help file styling improvements.
* *oui_video v0.1.0* (2016-09-13)
* *oui_dailymotion v1.3.1* (2016-02-25) inspired by "arc_youtube":http://andy-carter.com/txp/arc_youtube and "arc_vimeo":http://andy-carter.com/txp/arc_vimeo by "Andy Carter":http://andy-carter.com.
