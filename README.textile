h1. oui_video (beta)

Easily embed videos in articles and customise the appearance of the player.
This plugin does, by its own, what "arc_youtube":http://andy-carter.com/txp/arc_youtube, "arc_vimeo":http://andy-carter.com/txp/arc_vimeo and oui_dailymotion used to do together.
It also adds plugin preferences define most of the attribute default values, making things easier for site users.

h2. Table of contents

* "Plugin requirements":#requirements
* "Installation":#install
* "Preferences/options":#prefs
* "Tags":#tags
* "Examples":#examples
* "Author":#author
* "License":#Licence

h2(#requirements). Plugin requirements

oui_video's minimum requirements:

* "Textpattern CMS":http://textpattern.com/ 4.5+

h2(#install). Installation

To install go to the 'plugins' tab under 'admin' and paste the plugin code into the 'Install plugin' box, 'upload' and then 'install'. Please note that you will need to set-up a custom field to use for associating videos with articles, unless you choose to directly embed the new tag in the article text.

h2(#tags). Preferences/options

Plugin prefs are mainly used as default values for the oui_video @<txp:oui_video />@ attributes.
They can be overriden by these attributes when needed.

h2(#tags). Tags

h3. oui_video

Embeds a video in the page using an iframe.

bc. <txp:oui_video />

h4. Presentational attributes

* @label=""@ - Label for the video.
* @labeltag=""@ - HTML wraptag for the label, without brackets.
* @wraptag=""@ - HTML tag to be used as the content wraptag, without brackets.
* @class=""@ - CSS class for HTML content wraptag.

h4. Main tag attributes

Most of this attributes can be set via the _Preferences_ tab; +always prefer plugin "global" prefs to tag related attributes!+

* @video=""@ - Video url, the video id or the custom_field containing it.
* @provider=""@ - The video provider to use if the @video@ attribute value is an id.
* @width=""@ - The width of the player in pixels.
* @height=""@ - The height of the player in pixels.
* @ratio="4:3"@ - The ratio used to calculate the missing value for the width or the height.

h4. Vimeo additional player parameters

Most of this attributes can be set via the _Preferences_ tab; +always prefer plugin "global" prefs to tag related attributes!+

* @autopause="1"@ - @0@ or @1@ - Enables or disables pausing this video when another video is played.
* @autoplay="0"@ - @0@ or @1@ - Play the video automatically on load. Note that this won’t work on some devices.
* @badge="1"@ - @0@ or @1@ - Enables or disables the badge on the video.
* @byline="1"@ - @0@ or @1@ - Show the user’s byline on the video.
* @color="00adef"@ - Specify the color of the video controls. Make sure that you don’t include the #.
* @loop="0"@ - @0@ or @1@ - Play the video again when it reaches the end.
* @player_id=""@ - A unique id for the player that will be passed back with all Javascript API responses.
* @portrait="1"@ - @0@ or @1@ - Show the user’s portrait on the video.
* @title="1"@ - @0@ or @1@ - Show the title on the video.

More informations on "this Vimeo webpage":https://developer.vimeo.com/player/embedding.

h4. Youtube additional player parameters

Most of this attributes can be set via the _Preferences_ tab; +always prefer plugin "global" prefs to tag related attributes!+

* @autohide="2"@ - @0@, @1@ or @2@ - Indicates whether the video controls will automatically hide after a video begins playing. This parameter has been deprecated for HTML5 players, which display or hide the video progress bar and player controls automatically (autohide=1).
* @autoplay="0"@ - @0@ or @1@ - Specifies whether the initial video will automatically start to play when the player loads.
* @cc_load_policy@ - @1@ - Setting the parameter's value to 1 causes closed captions to be shown by default, even if the user has turned captions off.
* @color="red"@ - @red@ or @white@ - Specifies the color that will be used in the player's video progress bar to highlight the amount of the video that the viewer has already seen.
* @controls="1"@ - @0@, @1@ or @2@ - Indicates whether the video player controls are displayed.
* @disablekb="0"@ - @0@ or @1@ - Disables keyboard commands.
* @enablejsapi="0"@ - @0@ or @1@ - Enables the player to be controlled via IFrame or JavaScript Player API calls.
* @end=""@ - an integer - Specifies the time, measured in seconds from the start of the video, when the player should stop playing the video.
* @fs="1"@ - @0@ or @1@ - Setting this parameter to 0 prevents the fullscreen button from displaying in the player.
* @hl=""@ - Sets the player's interface language. The parameter value is an ISO 639-1 two-letter language code or a fully specified locale.
* @iv_load_policy="1"@ - @1@ or @3@ - Setting the parameter's value to 1 causes video annotations to be shown by default, whereas setting to 3 causes video annotations to not be shown by default.
* @loop="0"@ - @0@ or @1@ - Causes the player to play the video again and again.
* @modestbranding="0"@ - @0@ or @1@ - Lets you use a YouTube player that does not show a YouTube logo.
* @origin=""@ - Provides an extra security measure for the IFrame API and is only supported for IFrame embeds.
* @playerapiid=""@ - @0@ or @1@ - This setting is used in conjunction with the JavaScript API.
* @playlist=""@ - a list of video id's to read after the one provided via the @video@ attribute.
* @playsinline=""@ - Controls whether videos play inline or fullscreen in an HTML5 player on iOS.
* @rel="1"@ - @0@ or @1@ - Indicates whether the player should show related videos when playback of the initial video ends.
* @showinfo="1"@ - @0@ or @1@ - Causes the player to begin playing the video at the given number of seconds from the start of the video.
* @start=""@ - an integer - Causes the player to begin playing the video at the given number of seconds from the start of the video.
* @theme="dark"@ - @dark@ or @light@ - Indicates whether the embedded player will display player controls (like a play button or volume control) within a dark or light control bar. This parameter has been deprecated for HTML5 players

More informations on "this Youtube webpage":https://developers.google.com/youtube/player_parameters.

h4. Dailymotion additional player parameters

Most of this attributes can be set via the _Preferences_ tab; +always prefer plugin "global" prefs to tag related attributes!+

* @api=""@ - @postMessage@, @location@ or @1@ - Enables the Player API. In native mobile apps, use @api="location"@, otherwise we recommend using @api=1@.
* @autoplay="0"@ - @0@ or @1@ - Starts the playback of the video automatically after the player load. Note: this parameter may not work on some mobile OS.
* @controls="1"@ - @0@ or @1@ - Whether to display the player controls or not.
* @endscreen_enable="1"@ - @0@ or @1@ - Whether to enable the end screen or not.
* @id=""@ - ID of the player unique to the page to be passed back with all API messages.
* @mute="0"@ - @0@ or @1@ - Whether to mute the video or not.
* @origin=""@ - The domain of the page hosting the Dailymotion player. When using @api="postMessage"@, you might want to specify origin for extra security.
* @quality="auto"@ - @240@, @380@, @480@, @720@, @1080@, @1440@ or @2160@ - Specifies the suggested playback quality for the video.
* @sharing_enable="1"@ - @0@ or @1@ - Whether to display the sharing button or not.
* @start=""@ - Specifies the time (in seconds) from which the video should start playing.
* @subtitles_default=""@ - - Specifies the default selected subtitles language.
* @syndication=""@ - Passes your syndication key to the player.
* @ui_highlight="ffcc33"@ - Change the default highlight colour used in the controls (hex value without the leading #).
* @ui_logo="1"@ (@ui-logo@) - @0@ or @1@ - Whether to display the Dailymotion logo or not.
* @ui_start_screen_info="1"@ (@ui-start-screen-info@) - @0@ or @1@ - Whether to show video information (title and owner) on the start screen.
* @ui_theme="dark"@ - @dark@ or @light@ - Choose the default base colour theme.

More informations on "this Dailymotion webpage":https://developer.dailymotion.com/player#player-parameters.

h2. oui_if_video

In addition to oui_video this plugin also comes with oui_if_video, a conditional tag for checking if the video URL is a valid one.

bc. <txp:oui_if_video video="…">
[…]
</txp:oui_if_video>

h4. Attributes

Use one or the other of the following:

* @video=""@ - A URL or a custom field containing an URL to check if it is a valid video URL.
* @provider=""@ - vimeo, youtube or dailymotion.

h2(#examples). Examples

h3. Display a video

Use the prefs values for the @provider@ and/or @video@ attributes.

bc. <txp:oui_video />

Use a video id through the tag attribute.

bc. <txp:oui_video provider="dailymotion" video="x4l8awd" />

Let the plugin find the provider and the video id by providing the video url.

bc. <txp:oui_video video="https://vimeo.com/155020267" />

h3. Using the conditional tag

bc.. <txp:oui_if_video video="https://vimeo.com/155020267">
    Yes, it is a valid url pattern for a Youtube, Dailymotion or Vimeo video.
<txp:else />
    No…
</txp:oui_if_video>

p. …or with the provider attribute…

bc.. <txp:oui_if_video provider="vimeo" video="https://vimeo.com/155020267">
    Yes, it is a valid url pattern for a Vimeo video.
<txp:else />
    No
</txp:oui_if_video>

h2(#author). Author

"Nicolas Morand":https://github.com/NicolasGraph, from "arc_youtube":http://andy-carter.com/txp/arc_youtube and "arc_vimeo":http://andy-carter.com/txp/arc_vimeo by "Andy Carter":http://andy-carter.com and oui_dailymotion by "Nicolas Morand":https://github.com/NicolasGraph.

h2(#licence). License

This plugin is distributed under the "MIT licence":https://opensource.org/licenses/MIT.
Copyright (c) 2014 Andy Carter, (c) 2015-16 Nicolas Morand.
